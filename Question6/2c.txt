The reason this works is because log changes multiplication into addition. Since we want the maximum product of probabilities, taking log turns that into maximum sum of logs. Then taking negative makes it a minimum problem. Dijkstra finds minimum sum paths correctly, so after transforming the weights, it gives the correct safest path. So basically, we didn’t change the meaning of the problem — we just changed how we calculate it so Dijkstra can handle it.